name: Run release build from tag

on:
  push:
    tags:
      - '**'

jobs:
  release:
    environment: CIRelease
    runs-on: ubuntu-latest

    steps:
    - name: Setup
      uses: IntershopCommunicationsAG/.github/actions/gradle-plugin-setup@v0.3
      with:
        signing-file: ${{ secrets.SIGNINGFILE }}
        signing-key-id: ${{ secrets.SIGNINGKEYID }}
        signing-password: ${{ secrets.SIGNINGPASSWORD }}
        api-key: ${{ secrets.APIKEY }}
        api-secret: ${{ secrets.APISECRET }}
        sonatype-user: ${{ secrets.SONATYPEUSER }}
        sonatype-password: ${{ secrets.SONATYPEPASSWORD }}
    - name: Release
      uses: IntershopCommunicationsAG/.github/actions/gradle-plugin-release@v0.3
